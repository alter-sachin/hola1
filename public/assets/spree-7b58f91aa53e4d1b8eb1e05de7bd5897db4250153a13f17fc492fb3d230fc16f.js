var Query=function(t){"use strict";var n=function(t){var n,r,e,o,u=[];if("undefined"==typeof t||null===t||""===t)return u;for(0===t.indexOf("?")&&(t=t.substring(1)),r=t.toString().split(/[&;]/),n=0;n<r.length;n++)e=r[n],o=e.split("="),u.push([o[0],o[1]]);return u},r=n(t),e=function(){var t,n,e="";for(t=0;t<r.length;t++)n=r[t],e.length>0&&(e+="&"),e+=n.join("=");return e.length>0?"?"+e:e},o=function(t){return t=decodeURIComponent(t),t=t.replace("+"," ")},u=function(t){var n,e;for(e=0;e<r.length;e++)if(n=r[e],o(t)===o(n[0]))return n[1]},i=function(t){var n,e,u=[];for(n=0;n<r.length;n++)e=r[n],o(t)===o(e[0])&&u.push(e[1]);return u},a=function(t,n){var e,u,i,a,f=[];for(e=0;e<r.length;e++)u=r[e],i=o(u[0])===o(t),a=o(u[1])===o(n),(1===arguments.length&&!i||2===arguments.length&&!i&&!a)&&f.push(u);return r=f,this},f=function(t,n,e){return 3===arguments.length&&e!==-1?(e=Math.min(e,r.length),r.splice(e,0,[t,n])):arguments.length>0&&r.push([t,n]),this},c=function(t,n,e){var u,i,c=-1;if(3===arguments.length){for(u=0;u<r.length;u++)if(i=r[u],o(i[0])===o(t)&&decodeURIComponent(i[1])===o(e)){c=u;break}a(t,e).addParam(t,n,c)}else{for(u=0;u<r.length;u++)if(i=r[u],o(i[0])===o(t)){c=u;break}a(t),f(t,n,c)}return this};return{getParamValue:u,getParamValues:i,deleteParam:a,addParam:f,replaceParam:c,toString:e}},Uri=function(t){"use strict";var n=!1,r=function(t){for(var r={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],o={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},u=r[n?"strict":"loose"].exec(t),i={},a=14;a--;)i[e[a]]=u[a]||"";return i[o.name]={},i[e[12]].replace(o.parser,function(t,n,r){n&&(i[o.name][n]=r)}),i},e=r(t||""),o=new Query(e.query),u=function(t){return"undefined"!=typeof t&&(e.protocol=t),e.protocol},i=null,a=function(t){return"undefined"!=typeof t&&(i=t),null===i?e.source.indexOf("//")!==-1:i},f=function(t){return"undefined"!=typeof t&&(e.userInfo=t),e.userInfo},c=function(t){return"undefined"!=typeof t&&(e.host=t),e.host},s=function(t){return"undefined"!=typeof t&&(e.port=t),e.port},l=function(t){return"undefined"!=typeof t&&(e.path=t),e.path},h=function(t){return"undefined"!=typeof t&&(o=new Query(t)),o},d=function(t){return"undefined"!=typeof t&&(e.anchor=t),e.anchor},p=function(t){return u(t),this},g=function(t){return a(t),this},m=function(t){return f(t),this},y=function(t){return c(t),this},P=function(t){return s(t),this},v=function(t){return l(t),this},w=function(t){return h(t),this},Q=function(t){return d(t),this},x=function(t){return h().getParamValue(t)},S=function(t){return h().getParamValues(t)},j=function(t,n){return 2===arguments.length?h().deleteParam(t,n):h().deleteParam(t),this},U=function(t,n,r){return 3===arguments.length?h().addParam(t,n,r):h().addParam(t,n),this},I=function(t,n,r){return 3===arguments.length?h().replaceParam(t,n,r):h().replaceParam(t,n),this},_=function(){var t="",n=function(t){return null!==t&&""!==t};return n(u())?(t+=u(),u().indexOf(":")!==u().length-1&&(t+=":"),t+="//"):a()&&n(c())&&(t+="//"),n(f())&&n(c())&&(t+=f(),f().indexOf("@")!==f().length-1&&(t+="@")),n(c())&&(t+=c(),n(s())&&(t+=":"+s())),n(l())?t+=l():n(c())&&(n(h().toString())||n(d()))&&(t+="/"),n(h().toString())&&(0!==h().toString().indexOf("?")&&(t+="?"),t+=h().toString()),n(d())&&(0!==d().indexOf("#")&&(t+="#"),t+=d()),t},O=function(){return new Uri(_())};return{protocol:u,hasAuthorityPrefix:a,userInfo:f,host:c,port:s,path:l,query:h,anchor:d,setProtocol:p,setHasAuthorityPrefix:g,setUserInfo:m,setHost:y,setPort:P,setPath:v,setQuery:w,setAnchor:Q,getQueryParamValue:x,getQueryParamValues:S,deleteQueryParam:j,addQueryParam:U,replaceQueryParam:I,toString:_,clone:O}},jsUri=Uri;(function(){window.Spree=function(){function t(){}return t.ready=function(t){return jQuery(document).ready(t),jQuery(document).on("page:load",function(){return t(jQuery)})},t.mountedAt=function(){return"/"},t.adminPath=function(){return"admin/"},t.pathFor=function(t){var n;return n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),this.url(""+n+this.mountedAt()+t,this.url_params).toString()},t.adminPathFor=function(t){return this.pathFor(""+this.adminPath()+t)},t.url=function(t,n){return void 0===t.path&&(t=new Uri(t)),n&&$.each(n,function(n,r){return t.addQueryParam(n,r)}),t},t.ajax=function(n,r){var e;return"string"==typeof n?$.ajax(t.url(n).toString(),r):(e=n.url,delete n.url,$.ajax(t.url(e).toString(),n))},t.routes={states_search:t.pathFor("api/v1/states"),apply_coupon_code:function(n){return t.pathFor("api/v1/orders/"+n+"/apply_coupon_code")}},t.url_params={},t}()}).call(this);